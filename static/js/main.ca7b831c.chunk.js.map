{"version":3,"sources":["utility.js","components/MonthPicker.js","AppContext.js","withContext.js","components/TotalPrice.js","components/PriceList.js","components/Tabs.js","components/CreateBtn.js","logo.svg","components/Loader.js","containers/Home.js","components/CategorySelect.js","components/PriceForm.js","containers/Create.js","App.js","reportWebVitals.js","index.js"],"names":["LIST_VIEW","CHART_VIEW","TYPE_OUTCOME","padLeft","n","range","size","startAt","arr","i","parseToYearAndMonth","str","date","Date","year","getFullYear","month","getMonth","flatternArr","reduce","map","item","id","Colors","MonthPicker","props","handleClick","event","node","contains","target","setState","isOpen","toggleDropdown","preventDefault","state","selectYear","yearNumber","selectedYear","selectMonth","monthNumber","onChange","document","addEventListener","this","removeEventListener","monthRange","yearRange","number","className","ref","onClick","style","display","index","role","React","Component","AppContext","createContext","withContext","Consumer","actions","data","TotalPrice","income","outcome","PriceList","items","onModifyItem","onDeleteItem","fontSize","backgroundColor","padding","color","icon","category","iconName","title","type","price","Tabs","tabChange","activeIndex","onTabChange","children","Children","child","activeClassName","Tab","Fragment","CreateBtn","e","Loader","rotate","tabsView","onChangeDate","selectNewMonth","modifyItem","history","push","deleteItem","changeView","tabView","getInitalData","categories","currentDate","isLoading","itemsWithCategory","Object","keys","cid","totalIncome","totalOutcome","forEach","src","logo","alt","length","CategorySelect","selectedCategory","selectedCategoryId","onSelectCategory","iconColor","backColor","textAlign","name","PriceForm","validatePass","errorMessage","onFormSubmit","editMode","priceInput","value","trim","dateInput","titleInput","dateString","match","d","Number","isNaN","getTime","toISOString","slice","isValidDate","onSubmit","sumbitForm","for","placeholder","defaultValue","input","onCancelSubmit","protypes","Proptypes","object","func","isRequired","defaultProps","tabsText","selectedTab","selectCategory","submitForm","isEditMode","updateItem","then","navigateToHome","createItem","validationPassed","params","getEditData","editItem","tabIndex","findIndex","text","filterCategories","filter","background","cancelSubmit","App","withLoading","cb","a","getURLWithData","Promise","all","axios","get","results","itemsCopy","JSON","parse","stringify","promises","resolve","fetchedCategories","finaEditItem","finalCategories","categoryId","newId","Math","random","toString","substr","parsedDate","monthCategory","timestamp","post","newItem","updatedCategoryId","modifiedItem","console","log","put","updatedItem","Provider","Route","exact","path","component","Home","Create","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ca7b831c.chunk.js","sourcesContent":["export const LIST_VIEW = 'list'\r\nexport const CHART_VIEW = 'chart'\r\nexport const TYPE_INCOME = 'income'\r\nexport const TYPE_OUTCOME = 'outcome'\r\n\r\n\r\nexport const padLeft = (n) => {\r\n  return n < 10 ? '0' + n : n\r\n}\r\n\r\nexport const range = (size, startAt = 0) => {\r\n  const arr = []\r\n  for (let i = 0; i < size; i++) {\r\n    arr[i] = startAt + i\r\n  }\r\n  return arr\r\n}\r\n\r\nexport const parseToYearAndMonth = (str) => {\r\n  const date = str ? new Date(str) : new Date()\r\n  return {\r\n    year: date.getFullYear(),\r\n    month: date.getMonth() + 1,\r\n  }\r\n}\r\nexport const isValidDate = (dateString) => {\r\n  const regEx = /^\\d{4}-\\d{2}-\\d{2}$/;\r\n  if (!dateString.match(regEx)) return false;  // Invalid format\r\n  const d = new Date(dateString);\r\n  if (Number.isNaN(d.getTime())) return false; // Invalid date\r\n  return d.toISOString().slice(0, 10) === dateString;\r\n}\r\n\r\nexport const flatternArr = (arr) => {\r\n  return arr.reduce((map, item) => {\r\n    map[item.id] = item\r\n    return map\r\n  }, {})\r\n}\r\n\r\nexport const ID = () => {\r\n  // Math.random should be unique because of its seeding algorithm.\r\n  // Convert it to base 36 (numbers + letters), and grab the first 9 characters\r\n  // after the decimal.\r\n  return '_' + Math.random().toString(36).substr(2, 9);\r\n}\r\n\r\nexport const Colors = {\r\n  blue: '#347eff',\r\n  deepBlue: '#61dafb',\r\n  green: '#28a745',\r\n  red: '#dc3545',\r\n  gray: '#555',\r\n  lightGray: '#efefef',\r\n  white: '#fff',\r\n}","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { padLeft, range } from '../utility'\r\n\r\nclass MonthPicker extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      isOpen: false,\r\n      selectedYear: this.props.year\r\n    }\r\n  }\r\n  componentDidMount () {\r\n    document.addEventListener('click', this.handleClick, false)\r\n  }\r\n  componentWillUnmount () {\r\n    document.removeEventListener('click', this.handleClick, false)\r\n  }\r\n  handleClick = (event) => {\r\n    if (this.node.contains(event.target)) {\r\n\r\n      return;\r\n    }\r\n    this.setState({\r\n      isOpen: false,\r\n    })\r\n  }\r\n  toggleDropdown = (event) => {\r\n    event.preventDefault()\r\n    this.setState({\r\n      isOpen: !this.state.isOpen\r\n    })\r\n  }\r\n  selectYear = (event, yearNumber) => {\r\n    event.preventDefault()\r\n    this.setState({\r\n      selectedYear: yearNumber\r\n    })\r\n  }\r\n  selectMonth = (event, monthNumber) => {\r\n    event.preventDefault()\r\n    this.setState({\r\n      isOpen: false\r\n    })\r\n    this.props.onChange(this.state.selectedYear, monthNumber)\r\n  }\r\n  render () {\r\n    const { year, month } = this.props\r\n    const { selectedYear } = this.state\r\n    const { isOpen } = this.state\r\n    const monthRange = range(12, 1)\r\n    const yearRange = range(9, -4).map(number => number + year)\r\n    return (\r\n      <div className=\"dropdown month-picker-component\" ref={(ref) => { this.node = ref }}>\r\n        <p>选择月份</p>\r\n\r\n        <button\r\n          className=\"btn btn-md btn-secondary dropdown-toggle\"\r\n          onClick={this.toggleDropdown}\r\n        >\r\n          {`${year}年 ${padLeft(month)}月`}\r\n        </button>\r\n\r\n        {isOpen &&\r\n          <div className=\"dropdown-menu\" style={{ display: 'block' }}>\r\n            <div className=\"row\">\r\n              <div className=\"col border-right years-range\">\r\n                {yearRange.map((yearNumber, index) =>\r\n                  <a key={index}\r\n                    role=\"button\"\r\n                    onClick={(event) => { this.selectYear(event, yearNumber) }}\r\n                    className={(yearNumber === selectedYear) ? \"dropdown-item active text-white\" : \"dropdown-item\"}>\r\n                    {yearNumber} 年\r\n                  </a>\r\n                )}\r\n              </div>\r\n              <div className=\"col months-range\">\r\n                {monthRange.map((monthNumber, index) =>\r\n                  <a key={index}\r\n                    role=\"button\"\r\n                    onClick={(event) => { this.selectMonth(event, monthNumber) }}\r\n                    className={(monthNumber === month) ? \"dropdown-item active text-white\" : \"dropdown-item\"}>\r\n                    {padLeft(monthNumber)} 月\r\n                  </a>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nMonthPicker.propTypes = {\r\n  year: PropTypes.number.isRequired,\r\n  month: PropTypes.number.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n}\r\nexport default MonthPicker","import React from 'react'\r\n\r\nexport const AppContext = React.createContext()\r\n","import React from 'react'\r\nimport { AppContext } from './AppContext.js'\r\n\r\nconst withContext = (Component) => {\r\n  return (props) => (\r\n    <AppContext.Consumer>\r\n      {({ state, actions }) => {\r\n        return <Component {...props} data={state} actions={actions} />\r\n      }}\r\n    </AppContext.Consumer>\r\n  )\r\n}\r\n\r\nexport default withContext","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nconst TotalPrice = ({ income, outcome }) => (\r\n  <div className=\"col\">\r\n    <div className=\"row mb-3\">\r\n      <h5 className=\"sm income\">收入：<span>{income}元</span></h5>\r\n    </div>\r\n    <div className=\"row\">\r\n      <h5 className=\"sm outcome\">支出：<span>{outcome}元</span></h5>\r\n    </div>\r\n  </div>\r\n)\r\n\r\nTotalPrice.propTypes = {\r\n  income: PropTypes.number.isRequired,\r\n  outcome: PropTypes.number.isRequired,\r\n}\r\nexport default TotalPrice","import React from 'react'\r\nimport Ionicon from 'react-ionicons'\r\nimport PropTypes from 'prop-types'\r\nimport { Colors } from '../utility'\r\nconst PriceList = ({ items, onModifyItem, onDeleteItem }) => {\r\n  return (\r\n    <ul className=\" list-group list-group-flush\">\r\n      {\r\n        items.map((item) => (\r\n          <li className=\"list-group-item d-flex \r\n            justify-content-between align-items-center\"\r\n            key={item.id}\r\n          >\r\n            <span className=\" no-padding col-1\">\r\n              <Ionicon\r\n                className=\"rounded-circle\"\r\n                fontSize=\"30px\"\r\n                style={{ backgroundColor: Colors.blue, padding: '5px' }}\r\n                color={'#fff'}\r\n                icon={item.category.iconName}\r\n              />\r\n            </span>\r\n            <span className=\" col-3\">{item.title}</span>\r\n            <span className=\"no-padding col-3 font-weight-bold\">\r\n              {(item.category.type === 'income') ? '+' : '-'}\r\n              {item.price}元\r\n            </span>\r\n            <span className=\"no-padding col-3\">{item.date}</span>\r\n            <a className=\"no-padding col-1\"\r\n              role=\"button\"\r\n              onClick={(event) => { event.preventDefault(); onModifyItem(item) }}\r\n            >\r\n              <Ionicon\r\n                className=\"rounded-circle\"\r\n                fontSize=\"30px\"\r\n                style={{ backgroundColor: Colors.green, padding: '5px' }}\r\n                color={'#fff'}\r\n                icon='ios-create-outline'\r\n              />\r\n            </a>\r\n            <a className=\" col-1\"\r\n              role=\"button\"\r\n              onClick={(event) => { event.preventDefault(); onDeleteItem(item) }}\r\n            >\r\n              <Ionicon\r\n                className=\"rounded-circle\"\r\n                fontSize=\"30px\"\r\n                style={{ backgroundColor: Colors.red, padding: '5px' }}\r\n                color={'#fff'}\r\n                icon='ios-close'\r\n              />\r\n            </a>\r\n          </li>\r\n        ))\r\n      }\r\n    </ul>\r\n  )\r\n}\r\n\r\nPriceList.propTypes = {\r\n  items: PropTypes.array.isRequired,\r\n  onModifyItem: PropTypes.func.isRequired,\r\n  onDeleteItem: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default PriceList","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport class Tabs extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      activeIndex: props.activeIndex\r\n    }\r\n  }\r\n  tabChange = (event, index) => {\r\n    event.preventDefault()\r\n    this.setState({\r\n      activeIndex: index\r\n    })\r\n    this.props.onTabChange(index)\r\n  }\r\n  render () {\r\n    const { children } = this.props\r\n    const { activeIndex } = this.state\r\n    return (\r\n      <ul className=\"nav nav-tabs nav-fill my-4 \">\r\n        {React.Children.map(children, (child, index) => {\r\n          const activeClassName = (activeIndex === index) ? 'nav-link active' : 'nav-link'\r\n          return (\r\n            <li className=\"nav-item\">\r\n              <a\r\n                onClick={(event) => { this.tabChange(event, index) }}\r\n                className={activeClassName}\r\n                role=\"button\"\r\n              >\r\n                {child}\r\n              </a>\r\n            </li>\r\n          )\r\n        })}\r\n      </ul>\r\n    )\r\n  }\r\n}\r\nTabs.propTypes = {\r\n  activeIndex: PropTypes.number.isRequired,\r\n  onTabChange: PropTypes.func.isRequired,\r\n}\r\n\r\nexport const Tab = ({ children }) =>\r\n  <React.Fragment>{children}</React.Fragment>\r\n\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Ionicon from 'react-ionicons'\r\n\r\nconst CreateBtn = ({ onClick }) => (\r\n  <button\r\n    className=\"btn btn-primary btn-block d-flex justify-content-center align-items-center\"\r\n    onClick={(e) => { onClick() }}\r\n  >\r\n    <Ionicon\r\n      className=\"rounded-circle\"\r\n      fontSize=\"30px\"\r\n      color='#fff'\r\n      icon='ios-add-circle'\r\n    />\r\n    <div className=\"sm\">创建一条新的记账记录</div>\r\n  </button>\r\n)\r\n\r\nCreateBtn.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n}\r\nexport default CreateBtn","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from 'react'\r\nimport Ionicon from 'react-ionicons'\r\nimport { Colors } from '../utility'\r\nconst Loader = () => (\r\n  <div className=\"loading-component text-center\">\r\n    <Ionicon icon=\"ios-refresh\"\r\n      fontSize=\"40px\"\r\n      color={Colors.blue}\r\n      rotate={true}\r\n    />\r\n    <h5>加载中</h5>\r\n  </div>\r\n)\r\n\r\nexport default Loader","import React, { Component } from 'react'\r\nimport { LIST_VIEW, CHART_VIEW, TYPE_INCOME, TYPE_OUTCOME, Colors } from '../utility'\r\nimport MonthPicker from '../components/MonthPicker.js'\r\nimport withContext from '../withContext'\r\nimport TotalPrice from '../components/TotalPrice'\r\nimport PriceList from '../components/PriceList'\r\nimport { Tabs, Tab } from '../components/Tabs'\r\nimport CreateBtn from '../components/CreateBtn'\r\nimport logo from '../logo.svg'\r\nimport Loader from '../components/Loader'\r\nimport Ionicon from 'react-ionicons'\r\n//方便拓展，这里做成一个数组，并且重构ViewTab组件\r\nconst tabsView = [LIST_VIEW, CHART_VIEW]\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      tabView: tabsView[0]\r\n    }\r\n  }\r\n  componentDidMount () {\r\n    this.props.actions.getInitalData()\r\n\r\n  }\r\n  onChangeDate = (year, month) => {\r\n    this.props.actions.selectNewMonth(year, month)\r\n  }\r\n  modifyItem = (item) => {\r\n    this.props.history.push(`/edit/${item.id}`)\r\n  }\r\n  deleteItem = (item) => {\r\n    this.props.actions.deleteItem(item)\r\n  }\r\n  handleClick = () => { this.props.history.push('/create') }\r\n  changeView = (index) => {\r\n    this.setState({\r\n      tabsView: tabsView[index]\r\n    })\r\n  }\r\n  render () {\r\n    const { data } = this.props\r\n    const { items, categories, currentDate, isLoading } = data\r\n\r\n    const { tabView } = this.state\r\n    //操作不可变值\r\n    const itemsWithCategory = Object.keys(items).map(id => {\r\n      items[id].category = categories[items[id].cid]\r\n      return items[id]\r\n    })\r\n    let totalIncome = 0, totalOutcome = 0\r\n    itemsWithCategory.forEach(item => {\r\n      if (item.category.type === TYPE_OUTCOME) {\r\n        totalOutcome += item.price\r\n      } else {\r\n        totalIncome += item.price\r\n      }\r\n    })\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"App-header\">\r\n          <div className=\"row mb-5 justify-content-center\">\r\n            <img src={logo} className=\"App-logo\" alt=\"logo\">\r\n            </img>\r\n          </div>\r\n          <div className=\"row align-items-center\">\r\n            <div className=\"col\">\r\n              <MonthPicker\r\n                year={currentDate.year}\r\n                month={currentDate.month}\r\n                onChange={this.onChangeDate}>\r\n\r\n              </MonthPicker>\r\n            </div>\r\n            <div className=\"col \">\r\n\r\n              <TotalPrice income={totalIncome} outcome={totalOutcome}>\r\n\r\n              </TotalPrice>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"content-area py-3 px-3\">\r\n          {isLoading && <Loader />}\r\n          {!isLoading &&\r\n            <React.Fragment>\r\n              <Tabs activeIndex={0} onTabChange={this.changeView}>\r\n                <Tab>\r\n                  <Ionicon\r\n                    className=\"rounded-circle mr-2\"\r\n                    fontSize=\"25px\"\r\n                    color={Colors.blue}\r\n                    icon='ios-paper'\r\n                  />\r\n                  列表模式\r\n                </Tab>\r\n                <Tab>\r\n                  <Ionicon\r\n                    className=\"rounded-circle mr-2\"\r\n                    fontSize=\"25px\"\r\n                    color={Colors.blue}\r\n                    icon='ios-pie'\r\n                  />\r\n                  图表模式\r\n                </Tab>\r\n              </Tabs>\r\n              <CreateBtn onClick={this.handleClick}></CreateBtn>\r\n              {\r\n                tabView === LIST_VIEW && itemsWithCategory.length > 0 &&\r\n                <PriceList\r\n                  items={itemsWithCategory}\r\n                  onModifyItem={this.modifyItem}\r\n                  onDeleteItem={this.deleteItem}\r\n                ></PriceList>\r\n              }\r\n              {\r\n                tabView === LIST_VIEW && itemsWithCategory.length === 0 &&\r\n                <div className=\"alert alert-light text-center no-record\">\r\n                  您还没有任何记账记录\r\n                </div>\r\n              }\r\n              {\r\n                tabView === CHART_VIEW &&\r\n                <div className=\"h1\" >\r\n                  这里是图表区域\r\n                </div>\r\n              }\r\n            </React.Fragment>\r\n          }\r\n        </div>\r\n      </React.Fragment >\r\n    )\r\n  }\r\n}\r\nexport default withContext(Home)","import React, { Component } from 'react'\r\nimport { Colors } from '../utility'\r\nimport Ionicon from 'react-ionicons'\r\nimport PropTypes from 'prop-types'\r\n\r\nclass CategorySelect extends Component {\r\n  render () {\r\n    const { categories, selectedCategory, onSelectCategory } = this.props\r\n    const selectedCategoryId = selectedCategory && selectedCategory.id\r\n\r\n    return (\r\n      <div className=\"category-select-component\">\r\n        <div className=\"row\">\r\n          {categories.map(category => {\r\n            const iconColor = (category.id === selectedCategoryId) ? Colors.white : Colors.gray\r\n            const backColor = (category.id === selectedCategoryId) ? Colors.blue : Colors.lightGray\r\n            return (\r\n              <div className=\"col-3\" style={{ textAlign: 'center' }} onClick={(event) => { this.props.onSelectCategory(category) }}>\r\n                <Ionicon\r\n                  className=\"rounded-circle\"\r\n                  fontSize=\"50px\"\r\n                  style={{ backgroundColor: backColor, padding: '5px' }}\r\n                  color={iconColor}\r\n                  icon={category.iconName}\r\n                />\r\n                <p>{category.name}</p>\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n    )\r\n  }\r\n\r\n}\r\nCategorySelect.propTypes = {\r\n  categories: PropTypes.array.isRequired,\r\n  selectedCategory: PropTypes.object.isRequired,\r\n  onSelectCategory: PropTypes.func.isRequired,\r\n\r\n}\r\nexport default CategorySelect\r\n// {\r\n//   props.categories.map(category => {\r\n//     return (\r\n//       <Ionicon\r\n//         className=\"rounded-circle\"\r\n//         style={{ backgroundColor: bac }}\r\n//       >\r\n\r\n//       </Ionicon>\r\n//     )\r\n//   })\r\n// }","import React, { Component } from 'react'\r\nimport Proptypes from 'prop-types'\r\nimport { isValidDate } from '../utility'\r\n\r\n// {\r\n//   \"title\": \"新的吃饭\",\r\n//   \"price\": 2000,\r\n//   \"date\": \"2021-11-15\",\r\n//   \"monthCategory\": \"2021-11\",\r\n//   \"id\": \"_qmatbbw11\",\r\n//   \"cid\": \"6\",\r\n//   \"timestamp\": 1542896269187\r\n// },\r\nclass PriceForm extends Component {\r\n  state = {\r\n    validatePass: true,\r\n    errorMessage: '',\r\n  }\r\n  sumbitForm (event) {\r\n    const { item, onFormSubmit } = this.props\r\n    const editMode = !!item.id\r\n    const price = this.priceInput.value.trim() * 1\r\n    const date = this.dateInput.value.trim()\r\n    const title = this.titleInput.value.trim()\r\n    //用排除法来做\r\n    //手下如果price不符合，然后date不符合，最后title不符合\r\n    if (price && date && title) {\r\n      if (price < 0) {\r\n        this.setState({\r\n          validatePass: false,\r\n          errorMessage: '价格数字必须大于0'\r\n        })\r\n      } else if (!isValidDate(date)) {\r\n        this.setState({\r\n          validatePass: false,\r\n          errorMessage: '请填写正确的日期格式'\r\n        })\r\n      } else {\r\n        this.setState({\r\n          validatePass: true,\r\n          errorMessage: ''\r\n        })\r\n        //有id的则为修改\r\n        if (editMode) {\r\n          //通过editMode区分提交和修改\r\n          onFormSubmit({ id: item.id, title, price, date }, editMode)\r\n        } else {\r\n          //无id的为创建\r\n          onFormSubmit({ title, price, date }, editMode)\r\n        }\r\n      }\r\n    } else {\r\n      this.setState({\r\n        validatePass: false,\r\n        errorMessage: '请输入所有必选项'\r\n      })\r\n    }\r\n    event.preventDefault()\r\n  }\r\n  render () {\r\n    const { title, price, date } = this.props.item\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <form onSubmit={(event) => { this.sumbitForm(event) }}>\r\n          <div className=\"form-group\">\r\n            <label for=\"title\">标题 *</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"title\" placeholder=\"请输入金额\"\r\n              defaultValue={title}\r\n              className=\"form-control\"\r\n              ref={(input) => { this.titleInput = input }}\r\n            ></input>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label for=\"money\">金额 *</label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"money\" placeholder=\"请输入标题\"\r\n              defaultValue={price}\r\n              className=\"form-control\"\r\n              ref={(input) => { this.priceInput = input }\r\n              }></input>\r\n\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label for=\"date\">日期 *</label>\r\n            <input\r\n              type=\"date\"\r\n              id=\"date\" placeholder=\"请输入价格\"\r\n              className=\"form-control\"\r\n              defaultValue={date}\r\n              ref={(input) => { this.dateInput = input }}\r\n            ></input>\r\n          </div>\r\n\r\n          <button type=\"submit\" className=\"btn btn-primary mt-2 mr-3\">提交</button>\r\n          <button className=\"btn btn-secondary mt-2\" onClick={this.props.onCancelSubmit}>取消</button>\r\n          {!this.state.validatePass &&\r\n            <div className=\"alert alert-danger mt-5\" role=\"alert\">\r\n              {this.state.errorMessage}\r\n            </div>\r\n          }\r\n        </form>\r\n      </React.Fragment >\r\n    )\r\n  }\r\n\r\n\r\n}\r\nPriceForm.protypes = {\r\n  item: Proptypes.object,\r\n  onFormSubmit: Proptypes.func.isRequired,\r\n  onCancelSubmit: Proptypes.func.isRequired\r\n}\r\nPriceForm.defaultProps = {\r\n  item: {}\r\n}\r\n\r\n\r\n\r\nexport default PriceForm\r\n\r\n\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { TYPE_INCOME, TYPE_OUTCOME } from '../utility'\r\nimport CategorySelect from '../components/CategorySelect'\r\nimport { Tabs, Tab } from '../components/Tabs'\r\nimport withContext from '../withContext'\r\nimport Loader from '../components/Loader'\r\nimport PriceForm from '../components/PriceForm'\r\n\r\nconst tabsText = [TYPE_OUTCOME, TYPE_INCOME]\r\nclass Create extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      selectedTab: TYPE_OUTCOME,\r\n      selectedCategory: null,\r\n      validationPassed: true,\r\n    }\r\n  }\r\n  componentDidMount () {\r\n    const { id } = this.props.match.params\r\n    //通过getEditData获取类别和对应要编辑项目信息\r\n    //之所以通过getEditData获取数据，\r\n    //而不是this.props.data中获取是因为我们希望能对异步做一些优化\r\n    //考虑用户直接输入/edit/:id，这个时候app.js中没有挂载好数据可以得到\r\n    //getEditData的封装就是做了这样一个事情，如果有数据直接拿，没有数据还要再请求一次\r\n    if (id) {\r\n      this.props.actions.getEditData(id).then(data => {\r\n        const { editItem, categories } = data\r\n        this.setState({\r\n          //如果找不到id或者找不到editItem,本页面变为创建页\r\n          selectedTab: (editItem) ? categories[editItem.cid].type : TYPE_OUTCOME,\r\n          selectedCategory: (editItem) ? categories[editItem.cid] : null\r\n        })\r\n      })\r\n    }\r\n\r\n  }\r\n  tabChange = (index) => {\r\n    this.setState({\r\n      selectedTab: tabsText[index]\r\n    })\r\n  }\r\n  selectCategory = (category) => {\r\n    this.setState({\r\n      selectedCategory: category\r\n    })\r\n  }\r\n  submitForm = (data, isEditMode) => {\r\n\r\n    //这里是最终执行位置，在这里卡住不符合要求的值即可\r\n    if (!this.state.selectedCategory) {\r\n      this.setState({\r\n        validationPassed: false\r\n      })\r\n      return\r\n    }\r\n\r\n    if (!isEditMode) {\r\n      // create\r\n\r\n      //成功后再跳回\r\n\r\n      this.props.actions.createItem(data, this.state.selectedCategory.id).then(this.navigateToHome)\r\n    } else {\r\n\r\n      // update \r\n      this.props.actions.updateItem(data, this.state.selectedCategory.id).then(this.navigateToHome)\r\n    }\r\n    //后台出现错误，都更新失败了也跳回\r\n    this.props.history.push('/')\r\n  }\r\n  cancelSubmit () {\r\n    this.props.history.push('/')\r\n  }\r\n  navigateToHome = () => {\r\n    this.props.history.push('/')\r\n  }\r\n  render () {\r\n    const { selectedTab, selectedCategory, validationPassed } = this.state\r\n    const tabIndex = tabsText.findIndex(text => text === selectedTab)\r\n    const { data, actions } = this.props\r\n    const items = data.items\r\n    const categories = data.categories\r\n    const filterCategories = Object.keys(categories)\r\n      .map(id => categories[id])\r\n      .filter(item => item.type === selectedTab)\r\n    const id = this.props.match.params.id\r\n    const editItem = (id && items[id]) ? items[id] : {}\r\n    return (\r\n      <div className=\"create-page py-3 px-3 rounded mt-3\" style={{ background: '#fff' }}>\r\n        {data.isLoading &&\r\n          <Loader />\r\n        }\r\n        <Tabs activeIndex={tabIndex} onTabChange={this.tabChange}>\r\n          <Tab>\r\n            支出\r\n          </Tab>\r\n          <Tab>\r\n            收入\r\n          </Tab>\r\n        </Tabs>\r\n        <CategorySelect\r\n          categories={filterCategories}\r\n          selectedCategory={selectedCategory}\r\n          onSelectCategory={this.selectCategory}>\r\n        </CategorySelect>\r\n        <PriceForm item={editItem} onFormSubmit={this.submitForm} onCancelSubmit={this.cancelSubmit}></PriceForm>\r\n        {!validationPassed &&\r\n          <div className=\"alert alert-danger mt-5\" role=\"alert\">\r\n            请选择分类信息\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\nCreate.propTypes = {\r\n  data: PropTypes.object.isRequired,\r\n  actions: PropTypes.object.isRequired\r\n}\r\nexport default withContext(Create)","import React from 'react'\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport Home from './containers/Home'\nimport Create from './containers/Create'\nimport { BrowserRouter as Router, Route } from 'react-router-dom'\nimport { AppContext } from './AppContext'\nimport { flatternArr, parseToYearAndMonth, ID } from './utility'\nimport axios from 'axios'\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    //同一在容器型组件中获取数据\n    this.state = {\n      items: {},\n      categories: {},\n      isLoading: false,\n      currentDate: parseToYearAndMonth(\"2021-12\")\n    }\n    const withLoading = (cb) => {\n      return (...args) => {\n        this.setState({\n          isLoading: true\n        })\n        return cb(...args)\n      }\n    }\n    this.actions = {\n      getInitalData: withLoading(async () => {\n        const { currentDate } = this.state\n        const getURLWithData = `/items?monthCategory=${currentDate.year}-${currentDate.month}`\n        const results = await Promise.all([axios.get('/categories'), axios.get(getURLWithData)])\n        const [categories, items] = results\n        this.setState({\n          items: flatternArr(items.data),\n          categories: flatternArr(categories.data),\n          isLoading: false\n        })\n        return { items, categories }\n      }),\n      selectNewMonth: withLoading(async (year, month) => {\n        //开启loading之后\n        //重新获取数据，发送网络请求\n        const getURLWithData = `/items?monthCategory=${year}-${month}&_sort=timestamp&_order=desc`\n        const items = await axios.get(getURLWithData)\n        this.setState({\n          items: flatternArr(items.data),\n          currentDate: {\n            year, month\n          },\n          isLoading: false\n        })\n        return items\n      }),\n      deleteItem: withLoading(async (item) => {\n        // await axios.delete(`/items/${item.id}`)\n        const itemsCopy = JSON.parse(JSON.stringify(this.state.items))\n        delete itemsCopy[item.id]\n        this.setState({\n          items: itemsCopy,\n          isLoading: false\n        })\n      }),\n      getEditData: withLoading(async (id) => {\n        //根据id获取数据\n        //如果有就不用获取了,如果没有就获取\n        const { items, categories } = this.state\n        const promises = []\n        if (!items[id]) {\n          //如果找不到该item，那么需要发送网络请求\n          ///items?id=${id}返回的是一个数组，但是/items/${id}返回的是一个对象\n          promises.push(axios.get(`/items/${id}`))\n        } else {\n          promises.push(new Promise(resolve => resolve(null)))\n        }\n        if (Object.keys(categories).length === 0) {\n          promises.push(axios.get('/categories'))\n        } else {\n          promises.push(new Promise(resolve => resolve(null)))\n        }\n        const [editItem, fetchedCategories] = await Promise.all(promises)\n        //editItem有可能取不到\n        //取到了分两种情况，app.js中已经取到和通过Create.js发送网络请求得到\n        const finaEditItem = editItem ? editItem.data : items[id]\n        const finalCategories = fetchedCategories ? flatternArr(fetchedCategories.data) : categories\n        //这里也可以分类讨论，如果有id则为编辑模式，需要传items，并替换对应的item项，\n        //传入items是为了items[id]可以取到对应的值\n        //完成本地直接更新\n        //如果没有id则为创建模式，不用item也可以\n        this.setState({\n          categories: finalCategories,\n          isLoading: false,\n          items: { [id]: finaEditItem }\n        })\n\n        return {\n          editItem: finaEditItem,\n          categories: finalCategories\n        }\n      }),\n      createItem: withLoading(async (data, categoryId) => {\n        // {\n        //   \"title\": \"新的吃饭\",\n        //   \"price\": 2000,\n        //   \"date\": \"2021-11-15\",\n        //   \"monthCategory\": \"2021-11\",\n        //   \"id\": \"_qmatbbw11\",\n        //   \"cid\": \"6\",\n        //   \"timestamp\": 1542896269187\n        // },\n        const newId = ID()\n        const parsedDate = parseToYearAndMonth(data.date)\n        data.monthCategory = `${parsedDate.year}-${parsedDate.month}`\n        data.timestamp = new Date(data.date).getTime()\n        const newItem = await axios.post('/items', { ...data, id: newId, cid: categoryId })\n        //这里不写items也可以因为先执行createItem再跳回后再componentDidMount中重新请求数据，\n        //除非后台数据刷新不及时或者keep-alive后导致前后端数据不一致的情况\n        // this.setState({\n        //   items: { ...this.state.items, [newId]: newItem.data },\n        //   isLoading: false,\n        // })\n        return newItem.data\n      }),\n      updateItem: withLoading(async (item, updatedCategoryId) => {\n        const parsedDate = parseToYearAndMonth(item.date)\n        const modifiedItem = {\n          ...item,\n          cid: updatedCategoryId,\n          timestamp: new Date(item.date).getTime(),\n          monthCategory: `${parsedDate.year}-${parsedDate.month}`\n        }\n        console.log(modifiedItem);\n        const updatedItem = await axios.put(`/items/${modifiedItem.id}`, modifiedItem)\n        return updatedItem.data\n      })\n    }\n  }\n  render () {\n\n    return (\n      <AppContext.Provider value={{\n        state: this.state,\n        actions: this.actions\n      }}>\n        <Router>\n          <div className=\"App sm\">\n            <div className=\"container pb-5\">\n              <Route exact path=\"/\" component={Home} />\n              <Route path=\"/create\" component={Create} />\n              <Route path=\"/edit/:id\" component={Create} />\n            </div>\n          </div>\n        </Router>\n      </AppContext.Provider>\n    )\n  }\n\n  ;\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}